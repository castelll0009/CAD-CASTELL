{"version":3,"file":"context.js","names":["Equal","_interopRequireWildcard","require","_Function","_GlobalValue","Hash","_Inspectable","_Pipeable","_Predicate","_effectable","option","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","TagTypeId","exports","Symbol","for","STMSymbolKey","STMTypeId","TagProto","EffectPrototype","_tag","_op","effectVariance","_S","_","_I","toString","toJSON","_id","identifier","stack","NodeInspectSymbol","of","self","context","make","tagRegistry","globalValue","Map","makeTag","limit","Error","stackTraceLimit","creationError","tag","create","TypeId","ContextProto","symbol","that","isContext","unsafeMap","size","k","keys","equals","number","pipe","pipeArguments","arguments","services","Array","from","map","makeContext","serviceNotFoundError","error","String","lines","split","length","afterAt","match","message","splice","join","hasProperty","isTag","_empty","empty","service","add","dual","unsafeGet","getOption","none","some","merge","s","pick","tags","tagSet","Set","newEnv","entries","omit","delete"],"sources":["../../../src/internal/context.ts"],"sourcesContent":[null],"mappings":"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"}